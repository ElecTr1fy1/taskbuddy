"'use client';\n\nimport { createContext, useContext, useState, useCallback, ReactNode } from 'react';\n\ninterface ActionCard {\n  type: 'tasks_created' | 'reprioritized';\n  tasks?: any[];\n  count?: number;\n}\n\ninterface ChatMessage {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n  taskAction?: {\n    type: 'created' | 'reshuffled' | 'moved' | 'completed';\n    taskIds?: string[];\n    message?: string;\n  };\n  actionCards?: ActionCard[];\n}\n\ninterface AppContextType {\n  // AI Panel state\n  aiPanelOpen: boolean;\n  setAiPanelOpen: (open: boolean) => void;\n  aiMessages: ChatMessage[];\n  addMessage: (message: Omit<ChatMessage, 'id' | 'timestamp'>) => void;\n  clearMessages: () => void;\n\n  // Settings drawer state\n  settingsOpen: boolean;\n  setSettingsOpen: (open: boolean) => void;\n\n  // Data refresh trigger\n  refreshKey: number;\n  triggerRefresh: () => void;\n}\n\nconst AppContext = createContext<AppContextType | undefined>(undefined);\n\nexport function AppProvider({ children }: { children: ReactNode }) {\n  const [aiPanelOpen, setAiPanelOpen] = useState(false);\n  const [aiMessages, setAiMessages] = useState<ChatMessage[]>([]);\n  const [settingsOpen, setSettingsOpen] = useState(false);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  const addMessage = useCallback((message: Omit<ChatMessage, 'id' | 'timestamp'>) => {\n    const newMessage: ChatMessage = {\n      ...message,\n      id: `msg-${Date.now()}-${Math.random().toString(36).slice(2, 7)}`,\n      timestamp: new Date(),\n    };\n    setAiMessages(prev => [...prev, newMessage]);\n  }, []);\n\n  const clearMessages = useCallback(() => {\n    setAiMessages([]);\n  }, []);\n\n  const triggerRefresh = useCallback(() => {\n    setRefreshKey(prev => prev + 1);\n  }, []);\n\n  return (\n    <AppContext.Provider\n      value={{\n        aiPanelOpen,\n        setAiPanelOpen,\n        aiMessages,\n        addMessage,\n        clearMessages,\n        settingsOpen,\n        setSettingsOpen,\n        refreshKey,\n        triggerRefresh,\n      }}\n    >\n      {children}\n    </AppContext.Provider>\n  );\n}\n\nexport function useApp() {\n  const context = useContext(AppContext);\n  if (context === undefined) {\n    return {\n      aiPanelOpen: false,\n      setAiPanelOpen: () => {},\n      aiMessages: [],\n      addMessage: () => {},\n      clearMessages: () => {},\n      settingsOpen: false,\n      setSettingsOpen: () => {},\n      refreshKey: 0,\n      triggerRefresh: () => {},\n    } as AppContextType;\n  }\n  return context;\n}\n\nexport type { ChatMessage, ActionCard };"